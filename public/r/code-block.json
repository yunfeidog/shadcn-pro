{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "code-block",
  "type": "registry:component",
  "title": "Code Block",
  "description": "A syntax highlighted code block component with copy functionality",
  "dependencies": [
    "prism-react-renderer",
    "lucide-react"
  ],
  "files": [
    {
      "path": "registry/yunfei/blocks/code-block.tsx",
      "content": "\"use client\";\r\n\r\nimport {cn} from \"@/lib/utils\";\r\nimport {Check, Copy} from \"lucide-react\";\r\nimport {useState} from \"react\";\r\nimport {Highlight, themes} from \"prism-react-renderer\";\r\n\r\n\r\ninterface CodeBlockProps {\r\n    children: string;\r\n    language?: string;\r\n    className?: string;\r\n}\r\n\r\nexport function CodeBlock({\r\n                              children,\r\n                              language = \"javascript\",\r\n                              className,\r\n                          }: CodeBlockProps) {\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    const copyToClipboard = async () => {\r\n        try {\r\n            await navigator.clipboard.writeText(children);\r\n            setCopied(true);\r\n            setTimeout(() => setCopied(false), 2000);\r\n        } catch (err) {\r\n            console.error(\"复制失败:\", err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={cn(\"relative rounded-lg border bg-background shadow-sm\", className)}>\r\n            {/* 顶部栏 */}\r\n            <div className=\"flex items-center justify-between px-4 py-3 border-b bg-muted/30\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"flex gap-1.5\">\r\n                        <div className=\"w-3 h-3 rounded-full bg-red-500\"></div>\r\n                        <div className=\"w-3 h-3 rounded-full bg-yellow-500\"></div>\r\n                        <div className=\"w-3 h-3 rounded-full bg-green-500\"></div>\r\n                    </div>\r\n                    <span className=\"ml-2 text-sm text-muted-foreground font-medium\">{language}</span>\r\n                </div>\r\n                <button\r\n                    onClick={copyToClipboard}\r\n                    className=\"flex items-center gap-1.5 px-2 py-1 text-sm text-muted-foreground hover:text-foreground transition-colors rounded hover:bg-muted/50\"\r\n                >\r\n                    {copied ? (\r\n                        <>\r\n                            <Check className=\"w-4 h-4\"/>\r\n                            已复制\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            <Copy className=\"w-4 h-4\"/>\r\n                            复制\r\n                        </>\r\n                    )}\r\n                </button>\r\n            </div>\r\n\r\n            {/* 代码高亮 */}\r\n            <Highlight code={children.trim()} language={language} theme={themes.github}>\r\n                {({className: preClass, style, tokens, getLineProps, getTokenProps}) => (\r\n                    <pre className={`${preClass} p-4 text-sm font-mono leading-relaxed overflow-x-auto`} style={style}>\r\n            {tokens.map((line, i) => (\r\n                <div key={i} {...getLineProps({line})}>\r\n                    {line.map((token, key) => (\r\n                        <span key={key} {...getTokenProps({token})} />\r\n                    ))}\r\n                </div>\r\n            ))}\r\n          </pre>\r\n                )}\r\n            </Highlight>\r\n        </div>\r\n    );\r\n}\r\n",
      "type": "registry:component"
    }
  ]
}