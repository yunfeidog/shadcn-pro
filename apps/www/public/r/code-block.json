{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "code-block",
  "type": "registry:ui",
  "title": "code block",
  "description": "A component for code block with syntax highlighting.",
  "dependencies": [
    "prism-react-renderer",
    "lucide-react"
  ],
  "files": [
    {
      "path": "registry/shadcn-pro/components/code-block.tsx",
      "content": "\"use client\"\n\nimport { useState } from \"react\"\nimport { Check, Copy } from \"lucide-react\"\nimport { Highlight, themes } from \"prism-react-renderer\"\n\nimport { cn } from \"@/lib/utils\"\n\ninterface CodeBlockProps {\n  children: string\n  language?: string\n  className?: string\n}\n\nexport function CodeBlock({\n  children,\n  language = \"javascript\",\n  className,\n}: CodeBlockProps) {\n  const [copied, setCopied] = useState(false)\n\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(children)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    } catch (err) {\n      console.error(\"复制失败:\", err)\n    }\n  }\n\n  return (\n    <div\n      className={cn(\n        \"bg-background relative rounded-lg border shadow-sm\",\n        className\n      )}\n    >\n      {/* 顶部栏 */}\n      <div className=\"bg-muted/30 flex items-center justify-between border-b px-4 py-1\">\n        <div className=\"flex items-center gap-1\">\n          <div className=\"flex gap-1.5\">\n            <div className=\"h-3 w-3 rounded-full bg-red-500\"></div>\n            <div className=\"h-3 w-3 rounded-full bg-yellow-500\"></div>\n            <div className=\"h-3 w-3 rounded-full bg-green-500\"></div>\n          </div>\n          <span className=\"text-muted-foreground ml-2 text-sm font-medium\">\n            {language}\n          </span>\n        </div>\n        <button\n          onClick={copyToClipboard}\n          className=\"text-muted-foreground hover:text-foreground hover:bg-muted/50 flex items-center gap-1.5 rounded px-2 py-1 text-sm transition-colors\"\n        >\n          {copied ? (\n            <>\n              <Check className=\"h-4 w-4\" />\n              已复制\n            </>\n          ) : (\n            <>\n              <Copy className=\"h-4 w-4\" />\n              复制\n            </>\n          )}\n        </button>\n      </div>\n\n      {/* 代码高亮 */}\n      <Highlight\n        code={children.trim()}\n        language={language}\n        theme={themes.github}\n      >\n        {({\n          className: preClass,\n          style,\n          tokens,\n          getLineProps,\n          getTokenProps,\n        }) => (\n          <pre\n            className={`${preClass} overflow-x-auto p-4 font-mono text-sm leading-relaxed`}\n            style={style}\n          >\n            {tokens.map((line, i) => (\n              <div key={i} {...getLineProps({ line })}>\n                {line.map((token, key) => (\n                  <span key={key} {...getTokenProps({ token })} />\n                ))}\n              </div>\n            ))}\n          </pre>\n        )}\n      </Highlight>\n    </div>\n  )\n}\n",
      "type": "registry:ui"
    }
  ]
}